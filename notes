curl https://raw.githubusercontent.com/kubernetes/helm/master/scripts/get > get_helm.sh; chmod 700 get_helm.sh; ./get_helm.sh

minikube addons enable dashboard
minikube addons list
minikube service kubernetes-dashboard --namespace kube-system
minikube dashboard --url
minikube start
Tip: Use 'minikube start -p <name>' to create a new cluster, or 'minikube delete' to delete this one.

kubectl cluster-info
kubectl get pods --all-namespaces

docker build -t 127.0.0.1:30400/hello-kenzan:latest -f applications/hello-kenzan/Dockerfile applications/hello-kenzan

docker stop socat-registry; docker rm socat-registry; docker run -d -e "REG_IP=`minikube ip`" -e "REG_PORT=30400" --name socat-registry -p 30400:5000 socat-registry

docker build -t 127.0.0.1:30400/jenkins:latest -f applications/jenkins/Dockerfile applications/jenkins

docker build -t socat-registry -f applications/socat/Dockerfile applications/socat

docker run -d -e "REG_IP=`minikube ip`" -e "REG_PORT=30400" --name socat-registry -p 30400:5000 socat-registry

minikube service registry-ui

kubectl exec -it `kubectl get pods --selector=app=jenkins --output=jsonpath={.items..metadata.name}` cat /var/jenkins_home/secrets/initialAdminPassword

http://192.168.99.101:31513/
https://medium.com/@jimkang/how-to-start-a-new-jenkins-container-and-update-jenkins-with-docker-cf628aa495e9

###########
$ minikube stop
$ VBoxManage modifyvm "minikube" --cpus 4 --memory 8196
$ minikube start --memory=8196 --cpus=4 --kubernetes-version=v1.13.0 \
    --vm-driver=virtualbox

####

minikube start –memory 8000 –cpus 2
eval $(minikube docker-env)
minikube addons enable heapster
minikube addons enable ingress
kubectl apply -f registry.yaml
minikube status
minikube ip:registry-ui-port
	http://192.168.99.102:32297/
minikube dashboard

# Installatie Jenkins:
/home/erik/adelerhof.eu/pipelinestuff

docker build -t registry.adelerhof.eu:49086/alpine:v1 .
docker push 127.0.0.1:30400/jenkins:2.183

#Open jenkins.yaml en zoek binnen de ConfigMap sectie naar
#kubectl config set-cluster minikube
#--server="https://192.168.99.100:8443"
#Vervang 192.168.99.100 door Minikube’s IP address

kubectl create –f jenkins.yaml

#e6b96533fb354eb08010563d7e617339
#http://192.168.99.102:30447/


kubectl create -f sonar-pv-postgres.yaml
kubectl create -f sonar-pvc-postgres.yaml

#https://coderise.io/installing-sonarqube-in-kubernetes/
kubectl create secret generic postgres-pwd --from-literal=password=password
kubectl create -f sonar-postgres-deployment.yaml
kubectl create -f sonar-postgres-service.yaml
kubectl create -f sonarqube-deployment.yaml
kubectl create -f sonarqube-service.yaml

#http://192.168.99.102:32501/sonar/about
admin/admin
#install SonarQube Scanner for Jenkins
https://medium.com/@rosaniline/setup-sonarqube-with-jenkins-declarative-pipeline-75bccdc9075f

###########

pipeline 1-10-19

docker build -t registry.adelerhof.eu:49086/alpine:v1 .
docker images
#different tag/registry?
docker tag alpine:latest registry.adelerhof.eu:49086/alpine:v1
docker push registry.adelerhof.eu:49086/alpine:v1

kubectl create -f jenkins.yaml
kubectl get pods
kubectl logs jenkins-8668947c84-hsl26

enkins initial setup is required. An admin user has been created and a password generated.
Please use the following password to proceed to installation:

f6cf8c7a700b40c59281d100d9617402

This may also be found at: /var/jenkins_home/secrets/initialAdminPassword

kubectl get svc

kubectl apply -f jenkins.yaml
kubectl get ingress

vi /etc/hosts
	178.20.173.142  jenkins.adelerhof.eu

curl -vk http://jenkins.adelerhof.eu

#503 zorg voor juiste selector:
#  selector:
#    app: jenkins
# https://www.jeffgeerling.com/blog/2018/fixing-503-service-unavailable-and-endpoints-not-available-traefik-ingress-kubernetes